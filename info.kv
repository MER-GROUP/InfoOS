#:kivy 2.0.0

# для вызова модальных окон
# #:import Factory kivy.factory.Factory

# decimal - работа с десятичными числами
# from decimal import Decimal as dec
# #:import dec decimal.Decimal

# Settings - настройки программы через json
# :import settings Settings.Settings

# Translate - автоматическая локализация программы на родной язык
#:import translate bind.Translate.Translate

# API - манипуляции (действия) с API опепационных систем
#:import api bind.API.API

# Работа с директориями и файлами ОС
# from merlib.fs.File import File
#:import file merlib.fs.File.File

# Дизайн программы
<Info>:
    # ---------------------------------------------------------------------------
    fullscreen: True
    # ---------------------------------------------------------------------------
    Display:
        orientation: 'vertical'
        BoxLayout:
            #размер виджета
            size_hint_y: None
            height: '48dp'
            DisplayButton:
                id: btn
                # text: 'МЕНЮ'
                text: translate().get_translate(file().file_get_local_language(), 'menu')
                # on_release: dropdown.open(self)
                on_press: dropdown.open(self)
        BoxLayout:
            DisplayScroll:
                # заблокировать меню выбора во время листания тескта
                # on_scroll_start: app.button_disable(btn)
                on_scroll_move: app.button_disable(btn)
                on_scroll_move: app.button_disable(about_btn)
                # разблокировать меню выбора когда текст остановлен от листания
                on_scroll_stop: app.button_enable(btn)
                on_scroll_stop: app.button_enable(about_btn)
                DisplayLabel:
                    id: info_label
                    # text: ''.join([(str(i) + '\n') for i in range(100)]) 
                    text: translate().get_translate(file().file_get_local_language(), 'intro')
        BoxLayout:
            #размер виджета
            size_hint_y: None
            height: '48dp'
            DisplayButton:
                id: about_btn
                # text: 'О программе'
                text: translate().get_translate(file().file_get_local_language(), 'info')
                on_press: app.change_text(info_label, translate().get_translate(file().file_get_local_language(), 'about'))
                on_press: app.change_text(btn, translate().get_translate(file().file_get_local_language(), 'menu'))
    # ---------------------------------------------------------------------------
    # выпадающее меню
    Widget:
        on_parent: dropdown.dismiss()
    # ---------------------------------------------------------------------------
    # выпадающее меню
    # что бы не было глюка надо выпвдающим списком перекрыть весь экран (screen)
    DropDown:
        id: dropdown
        on_select: btn.text = '{}'.format(args[1])
        DropDownButton:
            # Версия SDK
            text: translate().get_translate(file().file_get_local_language(), 'sdk')
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select(translate().get_translate(file().file_get_local_language(), 'sdk'))
            on_release: app.change_text(info_label, api().sdk_show())
        DropDownButton:
            text: 'function_2'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_2')
        DropDownButton:
            text: 'function_3'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_3')
        DropDownButton:
            text: 'function_4'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_4')
        DropDownButton:
            text: 'function_5'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_5')
        DropDownButton:
            text: 'function_6'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_6')
        DropDownButton:
            text: 'function_7'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_7')
        DropDownButton:
            text: 'function_8'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_8')
        DropDownButton:
            text: 'function_9'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_9')
        DropDownButton:
            text: 'function_10'
            size_hint_y: None
            height: '48dp'
            on_release: dropdown.select('method_10')
    # ---------------------------------------------------------------------------